--- ../src-base/minecraft/net/minecraft/world/gen/feature/WorldGenMegaJungle.java
+++ ../src-work/minecraft/net/minecraft/world/gen/feature/WorldGenMegaJungle.java
@@ -1,6 +1,7 @@
 package net.minecraft.world.gen.feature;
 
 import java.util.Random;
+import carpet.CarpetSettings;
 import net.minecraft.block.BlockVine;
 import net.minecraft.block.properties.PropertyBool;
 import net.minecraft.block.state.IBlockState;
@@ -9,6 +10,16 @@
 import net.minecraft.util.math.MathHelper;
 import net.minecraft.world.World;
 
+
+import carpet.CarpetSettings;
+import net.minecraft.block.BlockVine;
+import net.minecraft.block.properties.PropertyBool;
+import net.minecraft.block.state.IBlockState;
+import net.minecraft.init.Blocks;
+import net.minecraft.util.math.BlockPos;
+import net.minecraft.util.math.MathHelper;
+import net.minecraft.world.World;
+
 public class WorldGenMegaJungle extends WorldGenHugeTrees
 {
     public WorldGenMegaJungle(boolean p_i46448_1_, int p_i46448_2_, int p_i46448_3_, IBlockState p_i46448_4_, IBlockState p_i46448_5_)
@@ -38,7 +49,10 @@
                 {
                     k = p_180709_3_.func_177958_n() + (int)(1.5F + MathHelper.func_76134_b(f) * (float)i1);
                     l = p_180709_3_.func_177952_p() + (int)(1.5F + MathHelper.func_76126_a(f) * (float)i1);
-                    this.func_175903_a(p_180709_1_, new BlockPos(k, j - 3 + i1 / 2, l), this.field_76520_b);
+                    final BlockPos branchPos = new BlockPos(k, j - 3 + i1 / 2, l);
+                    if (!CarpetSettings.treeGiantJungleBedrockBreakFix || this.func_150523_a(p_180709_1_.func_180495_p(branchPos).func_177230_c())) {
+                        this.func_175903_a(p_180709_1_, branchPos, this.field_76520_b);
+                    }
                 }
 
                 int j2 = 1 + p_180709_2_.nextInt(2);
